(this["webpackJsonpmy-todolist"]=this["webpackJsonpmy-todolist"]||[]).push([[0],{111:function(t,e,n){},112:function(t,e,n){},137:function(t,e,n){"use strict";n.r(e);var a,i,c,s=n(0),o=n.n(s),r=n(12),d=n.n(r),l=(n(111),n(112),n(183)),u=n(184),j=n(185),b=n(186),O=n(168),f=n(172),T=n(138),h=n(174),p=n(173),S=n(13),I=n(7),m=n(85),x=n.n(m).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"4fe92c3a-1b95-46fb-8296-15a97f910aa4"}}),g=function(){return x.get("todo-lists")},D=function(t){return x.post("todo-lists",{title:t})},v=function(t,e){return x.put("todo-lists/".concat(t),{title:e})},k=function(t){return x.delete("todo-lists/".concat(t))};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(a||(a={})),function(t){t[t.Success=0]="Success",t[t.Error=1]="Error",t[t.captchaSuccess=10]="captchaSuccess"}(i||(i={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var y=function(t){return x.get("todo-lists/".concat(t,"/tasks"))},L=function(t,e){return x.post("todo-lists/".concat(t,"/tasks"),{title:e})},C=function(t,e,n){return x.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},E=function(t,e){return x.delete("todo-lists/".concat(t,"/tasks/").concat(e))},A=function(){return x.get("auth/me")},w=function(t){return x.post("auth/login",t)},N=function(){return x.delete("auth/login")},_=function(t,e){t.messages.length?e(H(t.messages[0])):e(H("Some error")),e(G("failed"))},P=function(t,e){e(H(t.message)),e(G("failed"))},K={status:"idle",error:null,isInitialized:!1},G=function(t){return{type:"APP/SET-STATUS",status:t}},H=function(t){return{type:"APP/SET-ERROR",error:t}},R=function(){return function(t){A().then((function(e){e.data.resultCode===i.Success?(t(U(!0)),t({type:"APP/SET-INITIALIZED"})):(_(e.data,t),t({type:"APP/SET-INITIALIZED"}))})).catch((function(e){P(e,t)}))}},F={isLoggedIn:!1},U=function(t){return{type:"LOGIN/SET-IS-LOGGED-IN",value:t}},M=n(3),B=function(t){var e=Object(S.b)(),n=Object(s.useCallback)((function(){e((function(t){t(G("loading")),N().then((function(e){e.data.resultCode===i.Success?(t(U(!1)),t(G("succeeded"))):_(e.data,t)})).catch((function(e){P(e,t)}))}))}),[]);return Object(M.jsxs)(O.a,{style:{justifyContent:"space-between"},children:[Object(M.jsx)(f.a,{color:"inherit",children:Object(M.jsx)(p.a,{})}),Object(M.jsx)(T.a,{variant:"h6",children:"TODOLISTS"}),t.isLoggedIn&&Object(M.jsx)(h.a,{onClick:n,color:"inherit",variant:"outlined",children:"Log out"})]})},V=n(32),Z=[],z=function(t,e){return{type:"TODOLIST/CHANGE-FILTER",value:t,todolistID:e}},Y=function(t,e){return{type:"TODOLIST/SET-TODOLIST-STATUS",todolistID:t,status:e}},q=n(178),J=n(37),W=n(187),Q=n(176),$=o.a.memo((function(t){var e=Object(s.useState)(""),n=Object(J.a)(e,2),a=n[0],i=n[1],c=Object(s.useState)(null),o=Object(J.a)(c,2),r=o[0],d=o[1];return Object(M.jsxs)("div",{style:{height:"80px"},children:[Object(M.jsx)(W.a,{value:a,onChange:function(t){i(t.currentTarget.value),d(null)},onKeyPress:function(e){"Enter"===e.key&&(t.addItem(a),i(""))},label:t.placeholder,variant:"outlined",helperText:r,error:!!r,disabled:t.disabled}),Object(M.jsx)(f.a,{onClick:function(){var e=a.trim();e?(t.addItem(e),d(null)):d("Title is required!!!"),i("")},disabled:t.disabled,children:Object(M.jsx)(Q.a,{color:t.disabled?"disabled":"primary"})})]})})),X=o.a.memo((function(t){var e=Object(s.useState)(!1),n=Object(J.a)(e,2),a=n[0],i=n[1],c=Object(s.useState)(t.title),o=Object(J.a)(c,2),r=o[0],d=o[1],l=Object(s.useCallback)((function(){i(!1),t.onChangeTitle(r)}),[r,t]);return a?Object(M.jsx)(W.a,{value:r,onChange:function(t){return d(t.currentTarget.value)},autoFocus:!0,onBlur:l}):Object(M.jsx)("div",{style:{display:"inline-block",minWidth:"50px"},onDoubleClick:function(){!t.disabled&&i(!0)},children:t.title})})),tt=n(139),et=n(177),nt=n(31),at={},it=function(t,e,n){return{type:"TASK/CHANGE-ENTITY-STATUS",todolistID:t,taskID:e,status:n}},ct=n(189),st=o.a.memo((function(t){var e=Object(S.b)(),n=Object(s.useCallback)((function(){var n,a;e((n=t.todolistID,a=t.task.id,function(t){t(G("loading")),t(Y(n,"loading")),t(it(n,a,"loading")),E(n,a).then((function(e){e.data.resultCode===i.Success?(t(function(t,e){return{type:"TASK/REMOVE-TASK",taskID:t,todolistID:e}}(a,n)),t(G("succeeded")),t(Y(n,"succeeded")),t(it(n,a,"succeeded"))):(_(e.data,t),t(Y(n,"failed")))})).catch((function(e){P(e,t),t(Y(n,"failed"))}))}))}),[e,t.task.id,t.todolistID]),c=Object(s.useCallback)((function(n){var c,s,o,r=n.currentTarget.checked;e((c=t.todolistID,s=t.task.id,o=r?a.Completed:a.New,function(t,e){t(G("loading")),t(Y(c,"loading")),t(it(c,s,"loading"));var n=e().tasks[c].find((function(t){return t.id===s}));n&&C(c,s,{title:n.title,status:o,description:n.description,deadline:n.deadline,startDate:n.startDate,priority:n.priority}).then((function(e){e.data.resultCode===i.Success?(t(function(t,e,n){return{type:"TASK/CHANGE-STATUS",taskID:t,status:e,todolistID:n}}(s,o,c)),t(Y(c,"succeeded")),t(it(c,s,"succeeded")),t(G("succeeded"))):(_(e.data,t),t(Y(c,"failed")))})).catch((function(e){P(e,t),t(Y(c,"failed"))}))}))}),[e,t.task.id,t.todolistID]),o=Object(s.useCallback)((function(n){var a,c,s;e((a=t.todolistID,c=t.task.id,s=n,function(t,e){t(G("loading")),t(Y(a,"loading")),t(it(a,c,"loading"));var n=e().tasks[a].find((function(t){return t.id===c}));n&&C(a,c,{title:s,status:n.status,description:n.description,deadline:n.deadline,startDate:n.startDate,priority:n.priority}).then((function(e){e.data.resultCode===i.Success?(t(function(t,e,n){return{type:"TASK/CHANGE-TASK-TITLE",newTitle:t,taskID:e,todolistID:n}}(s,c,a)),t(Y(a,"succeeded")),t(it(a,c,"succeeded")),t(G("succeeded"))):(_(e.data,t),t(Y(a,"failed")))})).catch((function(e){P(e,t),t(Y(a,"failed"))}))}))}),[e,t.task.id,t.todolistID]);return Object(M.jsxs)("li",{className:t.task.status?"is-done":"",children:[Object(M.jsx)(ct.a,{color:"primary",disabled:"loading"===t.entityTaskStatus,onChange:c,checked:t.task.status===a.Completed}),Object(M.jsx)(X,{title:t.task.title,onChangeTitle:o,disabled:"loading"===t.entityTaskStatus}),Object(M.jsx)(f.a,{onClick:n,disabled:"loading"===t.entityTaskStatus,children:Object(M.jsx)(et.a,{color:"loading"===t.entityTaskStatus?"disabled":"primary"})})]})})),ot=n(71),rt=n.n(ot),dt=o.a.memo((function(t){var e=Object(S.c)((function(e){return e.tasks[t.todolist.id]})),n=Object(S.b)();Object(s.useEffect)((function(){var e;n((e=t.todolist.id,function(t){t(G("loading")),y(e).then((function(n){t(function(t,e){return{type:"TASK/SET-TASKS",tasks:t,todolistID:e}}(n.data.items,e)),t(G("succeeded"))})).catch((function(e){t(H(e.message)),t(G("failed"))}))}))}),[n,t.todolist.id]);var c=e;"active"===t.todolist.filter?c=e.filter((function(t){return t.status===a.New})):"completed"===t.todolist.filter&&(c=e.filter((function(t){return t.status===a.Completed})));var o=c.map((function(e){return Object(M.jsx)(st,{task:e,todolistID:t.todolist.id,entityTaskStatus:e.entityTaskStatus},e.id)})),r=Object(s.useCallback)((function(){n(z("all",t.todolist.id))}),[n,t.todolist.id]),d=Object(s.useCallback)((function(){n(z("active",t.todolist.id))}),[n,t.todolist.id]),l=Object(s.useCallback)((function(){n(z("completed",t.todolist.id))}),[n,t.todolist.id]),u=Object(s.useCallback)((function(){var e;n((e=t.todolist.id,function(t){t(G("loading")),t(Y(e,"loading")),k(e).then((function(n){n.data.resultCode===i.Success?(t(function(t){return{type:"TODOLIST/REMOVE-TODOLIST",todolistID:t}}(e)),t(G("succeeded")),t(Y(e,"succeeded"))):(_(n.data,t),t(Y(e,"failed")))})).catch((function(e){P(e,t)}))}))}),[n,t.todolist.id]),j=Object(s.useCallback)((function(e){n(function(t,e){return function(n){n(G("loading")),n(Y(t,"loading")),L(t,e).then((function(e){e.data.resultCode===i.Success?(n({type:"TASK/ADD-TASK",task:e.data.data.item}),n(Y(t,"succeeded")),n(G("succeeded"))):(_(e.data,n),n(Y(t,"failed")))})).catch((function(e){P(e,n),n(Y(t,"failed"))}))}}(t.todolist.id,e))}),[n,t.todolist.id]),b=Object(s.useCallback)((function(e){var a,c;n((a=t.todolist.id,c=e,function(t,e){t(G("loading")),e().todolists.find((function(t){return t.id===a}))&&v(a,c).then((function(e){e.data.resultCode===i.Success?(t(function(t,e){return{type:"TODOLIST/CHANGE-TODOLIST-TITLE",newTitle:t,todolistID:e}}(c,a)),t(G("succeeded"))):_(e.data,t)})).catch((function(e){P(e,t)}))}))}),[n,t.todolist.id]);return Object(M.jsx)(tt.a,{elevation:10,className:rt.a.todolist,children:Object(M.jsxs)("div",{children:[Object(M.jsxs)("h3",{children:[Object(M.jsx)(X,{title:t.todolist.title,onChangeTitle:b,disabled:"loading"===t.entityStatus}),Object(M.jsx)(f.a,{onClick:u,disabled:"loading"===t.entityStatus,children:Object(M.jsx)(et.a,{})})]}),Object(M.jsx)($,{placeholder:"Task title",addItem:j,disabled:"loading"===t.entityStatus}),Object(M.jsx)("div",{className:rt.a.task_box,children:Object(M.jsx)("ul",{children:o})}),Object(M.jsxs)("div",{children:[Object(M.jsx)(h.a,{onClick:r,variant:"all"===t.todolist.filter?"contained":"text",color:"primary",children:"All"}),Object(M.jsx)(h.a,{onClick:d,variant:"active"===t.todolist.filter?"contained":"text",color:"primary",children:"Active"}),Object(M.jsx)(h.a,{onClick:l,variant:"completed"===t.todolist.filter?"contained":"text",color:"primary",children:"Completed"})]})]})})})),lt=n(15),ut=o.a.memo((function(){var t=Object(S.c)((function(t){return t.todolists})),e=Object(S.c)((function(t){return t.auth.isLoggedIn})),n=Object(S.b)();Object(s.useEffect)((function(){e&&n((function(t){t(G("loading")),g().then((function(e){t({type:"TODOLIST/SET-TODOLIST",todolists:e.data}),t(G("succeeded"))})).catch((function(e){P(e,t)}))}))}),[n]);var a=Object(s.useCallback)((function(t){n(function(t){return function(e){e(G("loading")),D(t).then((function(t){t.data.resultCode===i.Success?(e({type:"TODOLIST/ADD-TODOLIST",todolist:t.data.data.item}),e(G("succeeded"))):_(t.data,e)})).catch((function(t){P(t,e)}))}}(t))}),[n]),c=t.map((function(t){return Object(M.jsx)(q.a,{item:!0,children:Object(M.jsx)(dt,{todolist:t,entityStatus:t.entityStatus})},t.id)}));return e?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(q.a,{container:!0,style:{padding:"20px 0"},children:Object(M.jsx)($,{placeholder:"Todolist title",addItem:a})}),Object(M.jsx)(q.a,{container:!0,spacing:3,children:c})]}):Object(M.jsx)(lt.a,{to:"/login"})})),jt=n(191),bt=n(188);function Ot(t){return Object(M.jsx)(bt.a,Object(I.a)({elevation:6,variant:"filled"},t))}function ft(){var t=Object(S.c)((function(t){return t.app.error})),e=Object(S.b)(),n=function(t,n){"clickaway"!==n&&e(G("idle"))};return Object(M.jsx)(jt.a,{open:null!==t,autoHideDuration:6e3,onClose:n,children:Object(M.jsx)(Ot,{onClose:n,severity:"error",children:t})})}function Tt(t){return Object(M.jsx)(bt.a,Object(I.a)({elevation:6,variant:"filled"},t))}function ht(){var t=Object(S.c)((function(t){return t.app.status})),e=Object(S.b)(),n=function(t,n){"clickaway"!==n&&e(G("idle"))};return Object(M.jsx)(jt.a,{open:"succeeded"===t,autoHideDuration:2e3,onClose:n,children:Object(M.jsx)(Tt,{onClose:n,severity:"success",children:"Success Motherfucker))"})})}var pt=n(55),St=n(192),It=n(193),mt=n(181),xt=n(182),gt=n(94),Dt=n(35),vt=n.n(Dt),kt=n(179),yt=n(180),Lt=function(){var t=Object(S.c)((function(t){return t.auth.isLoggedIn})),e=Object(S.b)(),n=o.a.useState(!1),a=Object(J.a)(n,2),i=a[0],c=a[1],s=function(){c(!i)},r=Object(gt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email is equired",t.password?t.password.length<6&&(e.password="Password has been 6+ symbols"):e.password="Password is equired",e},onSubmit:function(t){var n;e((n=t,function(t){t(G("loading")),w(n).then((function(e){0===e.data.resultCode?(t(R()),t(G("succeeded"))):_(e.data,t)})).catch((function(e){P(e,t)}))})),r.resetForm()}});return t?Object(M.jsx)(lt.a,{to:"/"}):Object(M.jsx)(q.a,{container:!0,className:vt.a.login_container,children:Object(M.jsx)(tt.a,{elevation:6,className:vt.a.paper,children:Object(M.jsxs)(q.a,{item:!0,xs:4,children:[Object(M.jsx)("div",{className:vt.a.testData,children:Object(M.jsx)(St.a,{PopperProps:{disablePortal:!0},open:i,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:"Test Email: free@samuraijs.com Test Password: free",onBlur:s,placement:"right-start",children:Object(M.jsx)(f.a,{onClick:s,children:Object(M.jsx)(kt.a,{})})})}),Object(M.jsx)("form",{onSubmit:r.handleSubmit,className:vt.a.item,children:Object(M.jsxs)(It.a,{children:[Object(M.jsxs)("div",{className:vt.a.title,children:[Object(M.jsx)("h2",{children:"Login"}),Object(M.jsx)(yt.a,{})]}),Object(M.jsxs)(mt.a,{children:[Object(M.jsx)("div",{className:vt.a.field,children:Object(M.jsx)(W.a,Object(I.a)(Object(I.a)({label:"Email",margin:"normal"},r.getFieldProps("email")),{},{onBlur:r.handleBlur,helperText:r.errors.email,error:r.touched.email&&!!r.errors.email}))}),Object(M.jsx)("div",{className:vt.a.field,children:Object(M.jsx)(W.a,Object(I.a)(Object(I.a)({type:"password",label:"Password",margin:"normal"},r.getFieldProps("password")),{},{helperText:r.errors.password,error:r.touched.password&&!!r.errors.password}))}),Object(M.jsx)(xt.a,{label:"Remember me",control:Object(M.jsx)(ct.a,Object(I.a)({color:"primary"},r.getFieldProps("rememberMe"))),className:vt.a.checkbox}),Object(M.jsx)(h.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})]})})})};var Ct=function(){var t=Object(S.c)((function(t){return t.app.status})),e=Object(S.c)((function(t){return t.app.isInitialized})),n=Object(S.c)((function(t){return t.auth.isLoggedIn})),a=Object(S.b)();return Object(s.useEffect)((function(){a(R())}),[]),e?Object(M.jsxs)("div",{className:"App",children:["failed"===t&&Object(M.jsx)(ft,{}),"succeeded"===t&&Object(M.jsx)(ht,{}),Object(M.jsxs)(u.a,{position:"static",children:[Object(M.jsx)(B,{isLoggedIn:n}),Object(M.jsx)("div",{className:"progress",children:"loading"===t&&Object(M.jsx)(j.a,{})})]}),Object(M.jsx)(b.a,{fixed:!0,children:Object(M.jsx)(pt.a,{children:Object(M.jsxs)(lt.d,{children:[Object(M.jsx)(lt.b,{exact:!0,path:"/",render:function(){return Object(M.jsx)(ut,{})}}),Object(M.jsx)(lt.b,{path:"/login",render:function(){return Object(M.jsx)(Lt,{})}}),Object(M.jsx)(lt.b,{path:"/404",render:function(){return Object(M.jsx)("h1",{children:"404 \u0437\u0430\u043b\u0443\u043f\u0430"})}}),Object(M.jsx)(lt.a,{from:"*",to:"/404"})]})})})]}):Object(M.jsx)("div",{style:{position:"fixed",top:"50%",textAlign:"center",width:"100%"},children:Object(M.jsx)(l.a,{})})},Et=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),c(t),s(t)}))},At=n(65),wt=n(93),Nt=Object(At.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TASK/REMOVE-TASK":return Object(I.a)(Object(I.a)({},t),{},Object(nt.a)({},e.todolistID,t[e.todolistID].filter((function(t){return t.id!==e.taskID}))));case"TASK/ADD-TASK":return Object(I.a)(Object(I.a)({},t),{},Object(nt.a)({},e.task.todoListId,[Object(I.a)(Object(I.a)({},e.task),{},{entityTaskStatus:"idle"})].concat(Object(V.a)(t[e.task.todoListId]))));case"TASK/CHANGE-STATUS":return Object(I.a)(Object(I.a)({},t),{},Object(nt.a)({},e.todolistID,Object(V.a)(t[e.todolistID]).map((function(t){return t.id===e.taskID?Object(I.a)(Object(I.a)({},t),{},{status:e.status}):t}))));case"TASK/CHANGE-TASK-TITLE":return Object(I.a)(Object(I.a)({},t),{},Object(nt.a)({},e.todolistID,Object(V.a)(t[e.todolistID].map((function(t){return t.id===e.taskID?Object(I.a)(Object(I.a)({},t),{},{title:e.newTitle}):t})))));case"TODOLIST/REMOVE-TODOLIST":var n=Object(I.a)({},t);return delete n[e.todolistID],n;case"TODOLIST/ADD-TODOLIST":return Object(I.a)(Object(I.a)({},t),{},Object(nt.a)({},e.todolist.id,[]));case"TODOLIST/SET-TODOLIST":var a=Object(I.a)({},t);return e.todolists.forEach((function(t){return a[t.id]=[]})),a;case"TASK/SET-TASKS":return Object(I.a)(Object(I.a)({},t),{},Object(nt.a)({},e.todolistID,Object(V.a)(e.tasks).map((function(t){return Object(I.a)(Object(I.a)({},t),{},{entityTaskStatus:"idle"})}))));case"TASK/CHANGE-ENTITY-STATUS":return Object(I.a)(Object(I.a)({},t),{},Object(nt.a)({},e.todolistID,Object(V.a)(t[e.todolistID]).map((function(t){return t.id===e.taskID?Object(I.a)(Object(I.a)({},t),{},{entityTaskStatus:e.status}):t}))));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TODOLIST/REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todolistID}));case"TODOLIST/ADD-TODOLIST":return[].concat(Object(V.a)(t),[Object(I.a)(Object(I.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})]);case"TODOLIST/CHANGE-TODOLIST-TITLE":var n=Object(V.a)(t),a=n.find((function(t){return t.id===e.todolistID}));return a&&(a.title=e.newTitle),n;case"TODOLIST/CHANGE-FILTER":return t.map((function(t){return t.id===e.todolistID?Object(I.a)(Object(I.a)({},t),{},{filter:e.value}):t}));case"TODOLIST/SET-TODOLIST":return e.todolists.map((function(t){return Object(I.a)(Object(I.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"TODOLIST/SET-TODOLIST-STATUS":var i=Object(V.a)(t),c=i.find((function(t){return t.id===e.todolistID}));return c&&(c.entityStatus=e.status),i;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(I.a)(Object(I.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(I.a)(Object(I.a)({},t),{},{error:e.error});case"APP/SET-INITIALIZED":return Object(I.a)(Object(I.a)({},t),{},{isInitialized:!0});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN/SET-IS-LOGGED-IN":return Object(I.a)(Object(I.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),_t=Object(At.c)(Nt,Object(At.a)(wt.a));window.store=_t,d.a.render(Object(M.jsx)(S.a,{store:_t,children:Object(M.jsx)(Ct,{})}),document.getElementById("root")),Et()},35:function(t,e,n){t.exports={login_container:"Login_login_container__1_7Ts",paper:"Login_paper__3SGzY",item:"Login_item__1WDuG",testData:"Login_testData__3PeNS",title:"Login_title__RsGFg",field:"Login_field__1mFjT",checkbox:"Login_checkbox__GACxG"}},71:function(t,e,n){t.exports={todolist:"Todolist_todolist__9-2s4",task_box:"Todolist_task_box__122HQ"}}},[[137,1,2]]]);
//# sourceMappingURL=main.ca1e249f.chunk.js.map